!function(){function t(t){return t&&t.__esModule?t.default:t}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},o=e.parcelRequired7c6;null==o&&((o=function(t){if(t in n)return n[t].exports;if(t in r){var e=r[t];delete r[t];var o={id:t,exports:{}};return n[t]=o,e.call(o.exports,o,o.exports),o.exports}var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(t,e){r[t]=e},e.parcelRequired7c6=o);var a=o("efgtE"),i=o("37jAB"),s=o("j7yxE");o("4Nugj");var c=o("1VFfL"),u=(a=o("efgtE"),i=o("37jAB"),s=o("j7yxE"),o("4Nugj")),l=o("j1lrD"),f=new(0,a.default);function d(e){var n=document.getElementById("pagination"),r={totalItems:e,itemsPerPage:20,visiblePages:5,page:1,centerAlign:!0,firstItemClassName:"tui-first-child",lastItemClassName:"tui-last-child",template:{page:'<a href="#" class="tui-page-btn">{{page}}</a>',currentPage:'<strong class="tui-page-btn tui-is-selected">{{page}}</strong>',moveButton:'<a href="#" class="tui-page-btn tui-{{type}}"><span class="tui-ico-{{type}}">{{type}}</span></a>',disabledMoveButton:'<span class="tui-page-btn tui-is-disabled tui-{{type}}"><span class="tui-ico-{{type}}">{{type}}</span></span>',moreButton:'<a href="#" class="tui-page-btn tui-{{type}}-is-ellip"><span class="tui-ico-ellip">...</span></a>'}},o=window.matchMedia("(max-width: 768px)");function a(t){t.matches&&(r.visiblePages=3)}o.addEventListener("change",a),a(o),new(t(c))(n,r).on("afterMove",(function(t){u.refs.homeCardsContainer.innerHTML="",(0,l.createSpinner)(),f.page=t.page,f.fetchTrendingMovies().then((function(t){var e=t.results,n=(0,i.default)(e);(0,s.insertFilmsMarkupToHome)(n),localStorage.setItem("currentFilm",JSON.stringify(e))})).catch((function(t){return console.log(t)}))}))}l=o("j1lrD");var h=new(0,a.default);h.fetchGenres().then((function(t){var e=t.genres,n=!0,r=!1,o=void 0;try{for(var a,i=e[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var s=a.value,c=s.id,u=s.name;localStorage.setItem("genre_".concat(c),u)}}catch(t){r=!0,o=t}finally{try{n||null==i.return||i.return()}finally{if(r)throw o}}})).catch((function(t){return console.log(t)})),(0,l.createSpinner)(),h.fetchTrendingMovies().then((function(t){var e=t.results,n=t.total_results,r=(0,i.default)(e);(0,s.insertFilmsMarkupToHome)(r),d(n),localStorage.setItem("currentFilm",JSON.stringify(e))})).catch((function(t){return console.log(t)}));var p={};function v(t,e,n,r,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}Object.defineProperty(p,"__esModule",{value:!0}),p.default=function(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(t){v(a,r,o,i,s,"next",t)}function s(t){v(a,r,o,i,s,"throw",t)}i(void 0)}))}};var m={},g=function(t){"use strict";var e,n=Object.prototype,r=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var o=e&&e.prototype instanceof m?e:m,a=Object.create(o.prototype),i=new N(r||[]);return a._invoke=function(t,e,n){var r=f;return function(o,a){if(r===h)throw new Error("Generator is already running");if(r===p){if("throw"===o)throw a;return O()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var s=S(i,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=h;var c=l(t,e,n);if("normal"===c.type){if(r=n.done?p:d,c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=p,n.method="throw",n.arg=c.arg)}}}(t,n,i),a}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var f="suspendedStart",d="suspendedYield",h="executing",p="completed",v={};function m(){}function g(){}function y(){}var w={};c(w,a,(function(){return this}));var b=Object.getPrototypeOf,_=b&&b(b(M([])));_&&_!==n&&r.call(_,a)&&(w=_);var L=y.prototype=m.prototype=Object.create(w);function x(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function n(o,a,i,s){var c=l(t[o],t,a);if("throw"!==c.type){var u=c.arg,f=u.value;return f&&"object"==typeof f&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,i,s)}),(function(t){n("throw",t,i,s)})):e.resolve(f).then((function(t){u.value=t,i(u)}),(function(t){return n("throw",t,i,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function a(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(a,a):a()}}function S(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,S(t,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var o=l(r,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function M(t){if(t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}return{next:O}}function O(){return{value:e,done:!0}}return g.prototype=y,c(L,"constructor",y),c(y,"constructor",g),g.displayName=c(y,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,c(t,s,"GeneratorFunction")),t.prototype=Object.create(L),t},t.awrap=function(t){return{__await:t}},x(E.prototype),c(E.prototype,i,(function(){return this})),t.AsyncIterator=E,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new E(u(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},x(L),c(L,s,"Generator"),c(L,a,(function(){return this})),c(L,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=M,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(j),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return s.type="throw",s.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),j(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;j(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:M(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}(m);try{regeneratorRuntime=g}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=g:Function("r","regeneratorRuntime = r")(g)}function y(t){return w.apply(this,arguments)}function w(){return(w=t(p)(t(m).mark((function e(n){var r,o,a,i;return t(m).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=function(){console.log("Функція працює!!!!"),o.disabled=!1,o.textContent="Remove from watched",o.classList.add("active")},i=function(){r.disabled=!1,r.textContent="Remove from queue",r.classList.add("active")},r=document.querySelector("#queue-btn"),o=document.querySelector("#watched-btn"),b(n,"watched")?(console.log("есть такой в watched"),o.textContent="Added to watched",o.disabled=!0,setTimeout(a,1e3)):(console.log("нет такого в watched"),o.textContent="Add to watched",o.classList.remove("active"),console.log("удаляем класс active"),o.disabled=!1),b(n,"queue")?(console.log("есть такой в queue"),r.textContent="Added to queue",r.disabled=!0,setTimeout(i,1e3)):(console.log("нет такого в queue"),r.textContent="Add to queue",r.classList.remove("active"),r.disabled=!1);case 6:case"end":return t.stop()}}),e)})))).apply(this,arguments)}function b(t,e){return!!_(e).find((function(e){return e.id==t}))}o("4Nugj");var _=function(t){try{var e=localStorage.getItem(t);return JSON.parse(e)||void 0}catch(t){console.error("Get state error: ",t)}};function L(t,e,n){var r,o,a,i,s;function c(){var u=Date.now()-i;u<e&&u>=0?r=setTimeout(c,e-u):(r=null,n||(s=t.apply(a,o),a=o=null))}null==e&&(e=100);var u=function(){a=this,o=arguments,i=Date.now();var u=n&&!r;return r||(r=setTimeout(c,e)),u&&(s=t.apply(a,o),a=o=null),s};return u.clear=function(){r&&(clearTimeout(r),r=null)},u.flush=function(){r&&(s=t.apply(a,o),a=o=null,clearTimeout(r),r=null)},u}L.debounce=L,o("4Nugj");a=o("efgtE"),u=o("4Nugj");new(0,a.default),u=o("4Nugj"),a=o("efgtE"),i=o("37jAB"),s=o("j7yxE"),c=o("1VFfL"),a=o("efgtE"),i=o("37jAB"),s=o("j7yxE"),u=o("4Nugj"),l=o("j1lrD");var x=new(0,a.default);function E(e,n){var r=document.getElementById("pagination"),o={totalItems:e,itemsPerPage:20,visiblePages:5,page:1,centerAlign:!0,firstItemClassName:"tui-first-child",lastItemClassName:"tui-last-child",template:{page:'<a href="#" class="tui-page-btn">{{page}}</a>',currentPage:'<strong class="tui-page-btn tui-is-selected">{{page}}</strong>',moveButton:'<a href="#" class="tui-page-btn tui-{{type}}"><span class="tui-ico-{{type}}">{{type}}</span></a>',disabledMoveButton:'<span class="tui-page-btn tui-is-disabled tui-{{type}}"><span class="tui-ico-{{type}}">{{type}}</span></span>',moreButton:'<a href="#" class="tui-page-btn tui-{{type}}-is-ellip"><span class="tui-ico-ellip">...</span></a>'}},a=window.matchMedia("(max-width: 768px)");function f(t){t.matches&&(o.visiblePages=3)}a.addEventListener("change",f),f(a),new(t(c))(r,o).on("afterMove",(function(t){u.refs.homeCardsContainer.innerHTML="",(0,l.createSpinner)(),x.page=t.page,x.query=n,x.fetchSearchingMovies().then((function(t){var e=t.results,n=(0,i.default)(e);(0,s.insertFilmsMarkupToHome)(n),localStorage.setItem("currentFilm",JSON.stringify(e))})).catch((function(t){return console.log(t)}))}))}u=o("4Nugj");l=o("j1lrD");var S=new(0,a.default);u.refs.formSearch.addEventListener("submit",(function(t){t.preventDefault();var e=t.currentTarget.elements.searchInput.value.trim();S.query=e,(0,l.createSpinner)();try{S.fetchSearchingMovies().then((function(t){var n=t.results,r=t.total_results;if(0===n.length)return u.refs.filmsSearchList.innerHTML='<p class="search-form--badrequest">Search result not successful. Enter the correct movie name!</p>',void setTimeout((function(){return u.refs.filmsSearchList.innerHTML=""}),2e3);u.refs.homeCardsContainer.innerHTML="";var o=(0,i.default)(n);(0,s.insertFilmsMarkupToHome)(o),E(r,e)}))}catch(t){}u.refs.inputSearch.value="",u.refs.filmsSearchList.innerHTML="",u.refs.filmsSearchList.classList.remove("search-form__list--bgc")}));var T=o("iSn7Y");o("37jAB");u=o("4Nugj"),s=o("j7yxE");var j=o("cbazt");function N(){window.removeEventListener("keydown",M),document.body.classList.remove("show-modal"),u.refs.modalCardContainer.innerHTML=""}function M(t){"Escape"===t.code&&N()}u.refs.homeCardsContainer.addEventListener("click",(function(t){if("IMG"!==t.target.nodeName&&"B"!==t.target.nodeName)return;document.body.classList.add("show-modal"),window.addEventListener("keydown",M);var e=t.target.dataset.id,n=localStorage.getItem("currentFilm"),r=JSON.parse(n).find((function(t){return t.id==e})),o=(a=r,'<div class="movie__container--left-side">              \n                  <img class="movie__image" src="https://www.themoviedb.org/t/p/w500'.concat(a.poster_path||"https://raw.githubusercontent.com/marvall/filmoteka/main/src/images/no-poster.png",'"\n                    alt="').concat(a.title||a.name,"\" />\n\n                    <button type=\"button\" class=\"movie__btn-trailer\">\n                        <svg width='100' height='60' class='youtube-icon' viewBox='0 -77 512.00213 512'>\n                            <path\n                                d='m501.453125 56.09375c-5.902344-21.933594-23.195313-39.222656-45.125-45.128906-40.066406-10.964844-200.332031-10.964844-200.332031-10.964844s-160.261719 0-200.328125 10.546875c-21.507813 5.902344-39.222657 23.617187-45.125 45.546875-10.542969 40.0625-10.542969 123.148438-10.542969 123.148438s0 83.503906 10.542969 123.148437c5.90625 21.929687 23.195312 39.222656 45.128906 45.128906 40.484375 10.964844 200.328125 10.964844 200.328125 10.964844s160.261719 0 200.328125-10.546875c21.933594-5.902344 39.222656-23.195312 45.128906-45.125 10.542969-40.066406 10.542969-123.148438 10.542969-123.148438s.421875-83.507812-10.546875-123.570312zm0 0'\n                                fill='#f00'></path>\n                            <path d='m204.96875 256 133.269531-76.757812-133.269531-76.757813zm0 0' fill='#fff'></path>\n                        </svg>                      \n                    </button>                \n            </div>\n            <div class=\"movie__container--rigth-side\">\n                <h2 class=\"movie__title\">").concat(a.title||a.name,'</h2>\n                <table class="movie__info">\n                    <tbody>\n                        <tr class="movie__info-rows">\n                            <td class="movie__info-name">Vote / Votes</td>\n                            <td class="movie__info-rating">\n                                <span class="movie__info-rating-value movie__info-rating--accent">').concat(a.vote_average,'</span>\n                                <span class="movie__info-rating-slash">/</span>\n                                <span class="movie__info-rating-value">').concat(a.vote_count,'</span>\n                            </td>\n                        </tr>\n                        <tr class="movie__info-rows">\n                            <td class="movie__info-name">Popularity</td>\n                            <td class="movie__info-numbers">').concat(a.popularity,'</td>\n                        </tr>\n                        <tr class="movie__info-rows">\n                            <td class="movie__info-name">Original Title</td>\n                            <td class="movie__info-value">').concat(a.original_title||a.original_name,'</td>\n                        </tr>\n                        <tr class="movie__info-rows movie__info-rows--last">\n                            <td class="movie__info-name">Genre</td>\n                            <td class="movie__info-value">').concat((0,T.gettingGenresListForModal)(a.genre_ids)||"Genre not defined",'</td>\n                        </tr>\n                    </tbody>\n                </table>\n                <h2 class="movie__about-title">About</h2>\n                <p class="movie__about-text">\n                    ').concat(a.overview||"No text",'\n                </p>\n                <div class="movie__btn-container">\n                   \n                    <button type="submit" id="watched-btn" data-id="').concat(a.id,'" class="movie__btn btn btn--accent">ADD TO WATCHED\n                        </button>\n                    <button type="submit" id="queue-btn" data-id="').concat(a.id,'" class="movie__btn btn btn-queue">ADD TO QUEUE\n                        </button>\n                </div>\n            </div>\n        </div>'));var a;(0,s.insertModalMarkupHome)(o),document.querySelector("#watched-btn").addEventListener("click",(function(){(0,j.addWatchedLocalStorage)(r),y(e)})),document.querySelector("#queue-btn").addEventListener("click",(function(){(0,j.addQueueLocalStorage)(r),y(e)}))})),u.refs.closeModalBtn.addEventListener("click",N),u.refs.modalCardBackdrop.addEventListener("click",(function(t){t.currentTarget===t.target&&N()})),o("6IdhT"),o("ivF4K"),AOS.init()}();
//# sourceMappingURL=index.9f43a4db.js.map
