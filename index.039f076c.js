!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},a={},i=t.parcelRequired7c6;null==i&&((i=function(e){if(e in n)return n[e].exports;if(e in a){var t=a[e];delete a[e];var i={id:e,exports:{}};return n[e]=i,t.call(i.exports,i,i.exports),i.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){a[e]=t},t.parcelRequired7c6=i);var r={};Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};var o={};function s(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(e,t,n){t&&s(e.prototype,t);n&&s(e,n);return e};var c="e09f06c48afcb3ebfd8a25b0b6965d1e",u="https://api.themoviedb.org/3/",l=function(){"use strict";function t(){e(r)(this,t),this.searchQuery="",this._page=1}return e(o)(t,[{key:"fetchTrendingMovies",value:function(){var e="".concat(u,"trending/all/day?&api_key=").concat(c,"&page=").concat(this._page);return fetch(e).then((function(e){return e.json()}))}},{key:"fetchGenres",value:function(){var e="".concat("https://api.themoviedb.org/3/genre/movie/list?","&language=en-US&api_key=").concat(c);return fetch(e).then((function(e){return e.json()}))}},{key:"fetchSearchingMovies",value:function(){var e="".concat(u,"search/movie?api_key=").concat(c,"&page=").concat(this._page,"&query=").concat(this.searchQuery);return fetch(e).then((function(e){return e.json()}))}},{key:"query",get:function(){return this.searchQuery},set:function(e){this.searchQuery=e}},{key:"resetPage",value:function(){this.page=1}},{key:"page",get:function(){return this._page},set:function(e){this._page=e}}]),t}(),d=i("4Nugj"),f=function(){"use strict";function t(){e(r)(this,t),this.refs=d.refs}return e(o)(t,[{key:"show",value:function(){this.refs.spinner.classList.remove("is-hidden")}},{key:"hide",value:function(){this.refs.spinner.classList.add("is-hidden")}}]),t}(),m=i("37jAB"),p=i("j7yxE");i("4Nugj");var h=i("1VFfL"),v=(m=i("37jAB"),p=i("j7yxE"),d=i("4Nugj"),new l),g=new f;function b(t){var n=document.getElementById("pagination"),a={totalItems:t,itemsPerPage:20,visiblePages:5,page:1,centerAlign:!0,firstItemClassName:"tui-first-child",lastItemClassName:"tui-last-child",template:{page:'<a href="#" class="tui-page-btn">{{page}}</a>',currentPage:'<strong class="tui-page-btn tui-is-selected">{{page}}</strong>',moveButton:'<a href="#" class="tui-page-btn tui-{{type}}"><span class="tui-ico-{{type}}">{{type}}</span></a>',disabledMoveButton:'<span class="tui-page-btn tui-is-disabled tui-{{type}}"><span class="tui-ico-{{type}}">{{type}}</span></span>',moreButton:'<a href="#" class="tui-page-btn tui-{{type}}-is-ellip"><span class="tui-ico-ellip">...</span></a>'}},i=window.matchMedia("(max-width: 768px)");function r(e){e.matches&&(a.visiblePages=3)}i.addEventListener("change",r),r(i),new(e(h))(n,a).on("afterMove",(function(e){d.refs.homeCardsContainer.innerHTML="",g.show(),v.page=e.page,v.fetchTrendingMovies().then((function(e){var t=e.results,n=(0,m.default)(t);g.hide(),(0,p.insertFilmsMarkupToHome)(n),localStorage.setItem("currentFilm",JSON.stringify(t))})).catch((function(e){return console.log(e)}))}))}var y=new l,_=new f;y.fetchGenres().then((function(e){var t=e.genres,n=!0,a=!1,i=void 0;try{for(var r,o=t[Symbol.iterator]();!(n=(r=o.next()).done);n=!0){var s=r.value,c=s.id,u=s.name;localStorage.setItem("genre_".concat(c),u)}}catch(e){a=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(a)throw i}}})).catch((function(e){return console.log(e)})),_.show(),y.fetchTrendingMovies().then((function(e){var t=e.results,n=e.total_results,a=(0,m.default)(t);_.hide(),(0,p.insertFilmsMarkupToHome)(a),b(n),localStorage.setItem("currentFilm",JSON.stringify(t))})).catch((function(e){return console.log(e)})),i("4uNB6");function w(e,t,n){var a,i,r,o,s;function c(){var u=Date.now()-o;u<t&&u>=0?a=setTimeout(c,t-u):(a=null,n||(s=e.apply(r,i),r=i=null))}null==t&&(t=100);var u=function(){r=this,i=arguments,o=Date.now();var u=n&&!a;return a||(a=setTimeout(c,t)),u&&(s=e.apply(r,i),r=i=null),s};return u.clear=function(){a&&(clearTimeout(a),a=null)},u.flush=function(){a&&(s=e.apply(r,i),r=i=null,clearTimeout(a),a=null)},u}w.debounce=w,i("4Nugj");d=i("4Nugj");new l,d=i("4Nugj"),m=i("37jAB"),p=i("j7yxE"),h=i("1VFfL"),m=i("37jAB"),p=i("j7yxE"),d=i("4Nugj");var M=new l,S=new f;function T(t,n){var a=document.getElementById("pagination"),i={totalItems:t,itemsPerPage:20,visiblePages:5,page:1,centerAlign:!0,firstItemClassName:"tui-first-child",lastItemClassName:"tui-last-child",template:{page:'<a href="#" class="tui-page-btn">{{page}}</a>',currentPage:'<strong class="tui-page-btn tui-is-selected">{{page}}</strong>',moveButton:'<a href="#" class="tui-page-btn tui-{{type}}"><span class="tui-ico-{{type}}">{{type}}</span></a>',disabledMoveButton:'<span class="tui-page-btn tui-is-disabled tui-{{type}}"><span class="tui-ico-{{type}}">{{type}}</span></span>',moreButton:'<a href="#" class="tui-page-btn tui-{{type}}-is-ellip"><span class="tui-ico-ellip">...</span></a>'}},r=window.matchMedia("(max-width: 768px)");function o(e){e.matches&&(i.visiblePages=3)}r.addEventListener("change",o),o(r),new(e(h))(a,i).on("afterMove",(function(e){d.refs.homeCardsContainer.innerHTML="",S.show(),M.page=e.page,M.query=n,M.fetchSearchingMovies().then((function(e){var t=e.results,n=(0,m.default)(t);S.hide(),(0,p.insertFilmsMarkupToHome)(n),localStorage.setItem("currentFilm",JSON.stringify(t))})).catch((function(e){return console.log(e)}))}))}d=i("4Nugj");var E=new l,L=new f;d.refs.formSearch.addEventListener("submit",(function(e){e.preventDefault();var t=e.currentTarget.elements.searchInput.value.trim();E.query=t,d.refs.homeCardsContainer.innerHTML="",L.show();try{E.fetchSearchingMovies().then((function(e){var n=e.results,a=e.total_results;if(0===n.length)return d.refs.filmsSearchList.innerHTML='<p class="search-form--badrequest">Search result not successful. Enter the correct movie name!</p>',void setTimeout((function(){return d.refs.filmsSearchList.innerHTML=""}),2e3);var i=(0,m.default)(n);L.hide(),(0,p.insertFilmsMarkupToHome)(i),T(a,t),localStorage.setItem("currentFilm",JSON.stringify(n))}))}catch(e){}d.refs.inputSearch.value="",d.refs.filmsSearchList.innerHTML="",d.refs.filmsSearchList.classList.remove("search-form__list--bgc")}));var k=i("iSn7Y");i("37jAB");d=i("4Nugj"),p=i("j7yxE");var j=i("cbazt");i("4uNB6");var x=i("bpxeT"),N=i("2TvXO");function C(){document.querySelector(".movie__btn-trailer").insertAdjacentHTML("beforeend",'<h2 class="movie__btn-trailer--bad">Немає трейлера до цього фільму</h2>')}function q(e){return O.apply(this,arguments)}function O(){return(O=e(x)(e(N).mark((function t(n){var a,i,r;return e(N).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"b36f6ce5e4cba76038e6a3b1e091122a",a="\n  https://api.themoviedb.org/3/movie/".concat(n,"/videos?api_key=").concat("b36f6ce5e4cba76038e6a3b1e091122a","&language=en-US"),e.next=4,fetch(a);case 4:if((i=e.sent).ok){e.next=8;break}throw C(),new Error(i.status);case 8:return e.next=10,i.json();case 10:return r=e.sent,e.abrupt("return",r);case 12:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function A(e){var t=document.querySelector(".movie__btn-trailer");if(e){var n='<iframe id="player" type="text/html" width="250" height="370"\n  src="http://www.youtube.com/embed/'.concat(e,'?enablejsapi=1&origin=http://example.com"\n  frameborder="0"></iframe>');t.insertAdjacentHTML("beforeend",n)}else{t.insertAdjacentHTML("beforeend","<h2>Немає трейлера до цього фільму</h2>")}}function B(e){try{q(e).then((function(e){A(e.results[0].key)}))}catch(e){}}function H(){window.removeEventListener("keydown",I),document.body.classList.remove("show-modal"),d.refs.modalCardContainer.innerHTML=""}function I(e){"Escape"===e.code&&H()}d.refs.homeCardsContainer.addEventListener("click",(function(e){if("IMG"!==e.target.nodeName&&"DIV"!==e.target.nodeName&&"B"!==e.target.nodeName&&"H2"!==e.target.nodeName&&"P"!==e.target.nodeName)return;document.body.classList.add("show-modal"),window.addEventListener("keydown",I);var t=e.target.dataset.id,n=localStorage.getItem("currentFilm"),a=JSON.parse(n).find((function(e){return e.id==t})),i=(r=a,'<div class="movie__container--left-side">              \n                  <img class="movie__image" src="https://www.themoviedb.org/t/p/w500'.concat(r.poster_path||"https://raw.githubusercontent.com/marvall/filmoteka/main/src/images/no-poster.png",'"\n                    alt="').concat(r.title||r.name,"\" />\n                    <button type=\"button\" class=\"movie__btn-trailer\">\n                        <svg width='120' height='80' class='youtube-icon' viewBox='0 -77 512.00213 512'>\n                            <path\n                                d='m501.453125 56.09375c-5.902344-21.933594-23.195313-39.222656-45.125-45.128906-40.066406-10.964844-200.332031-10.964844-200.332031-10.964844s-160.261719 0-200.328125 10.546875c-21.507813 5.902344-39.222657 23.617187-45.125 45.546875-10.542969 40.0625-10.542969 123.148438-10.542969 123.148438s0 83.503906 10.542969 123.148437c5.90625 21.929687 23.195312 39.222656 45.128906 45.128906 40.484375 10.964844 200.328125 10.964844 200.328125 10.964844s160.261719 0 200.328125-10.546875c21.933594-5.902344 39.222656-23.195312 45.128906-45.125 10.542969-40.066406 10.542969-123.148438 10.542969-123.148438s.421875-83.507812-10.546875-123.570312zm0 0'\n                                fill='#f00'></path>\n                            <path d='m204.96875 256 133.269531-76.757812-133.269531-76.757813zm0 0' fill='#fff'></path>\n                        </svg>\n                    </button>                \n            </div>\n            <div class=\"movie__container--rigth-side\">\n                <h2 class=\"movie__title\">").concat(r.title||r.name,'</h2>\n                <table class="movie__info">\n                    <tbody>\n                        <tr class="movie__info-rows">\n                            <td class="movie__info-name">Vote / Votes</td>\n                            <td class="movie__info-rating">\n                                <span class="movie__info-rating-value movie__info-rating--accent">').concat(r.vote_average,'</span>\n                                <span class="movie__info-rating-slash">/</span>\n                                <span class="movie__info-rating-value">').concat(r.vote_count,'</span>\n                            </td>\n                        </tr>\n                        <tr class="movie__info-rows">\n                            <td class="movie__info-name">Popularity</td>\n                            <td class="movie__info-numbers">').concat(r.popularity,'</td>\n                        </tr>\n                        <tr class="movie__info-rows">\n                            <td class="movie__info-name">Original Title</td>\n                            <td class="movie__info-value">').concat(r.original_title||r.original_name,'</td>\n                        </tr>\n                        <tr class="movie__info-rows movie__info-rows--last">\n                            <td class="movie__info-name">Genre</td>\n                            <td class="movie__info-value">').concat((0,k.gettingGenresListForModal)(r.genre_ids)||"Genre not defined",'</td>\n                        </tr>\n                    </tbody>\n                </table>\n                <h2 class="movie__about-title">About</h2>\n                <p class="movie__about-text">\n                    ').concat(r.overview||"No text",'\n                </p>\n                <div class="movie__btn-container">\n                   \n                    <button type="submit" id="watched-btn" data-id="').concat(r.id,'" class="movie__btn btn btn--accent">ADD TO WATCHED\n                        </button>\n                    <button type="submit" id="queue-btn" data-id="').concat(r.id,'" class="movie__btn btn btn-queue">ADD TO QUEUE\n                        </button>\n                </div>\n            </div>\n        </div>'));var r;(0,p.insertModalMarkupHome)(i),document.querySelector("#watched-btn").addEventListener("click",(function(){"REMOVE FROM WATCHED"===document.querySelector("#watched-btn").textContent&&(document.querySelector("#watched-btn").textContent="ADD TO WATCHED"),(0,j.addWatchedLocalStorage)(a,document.querySelector("#watched-btn"))})),document.querySelector("#queue-btn").addEventListener("click",(function(){"REMOVE FROM QUEUE"===document.querySelector("#queue-btn").textContent&&(document.querySelector("#queue-btn").textContent="ADD TO QUEUE"),(0,j.addQueueLocalStorage)(a,document.querySelector("#queue-btn"))})),document.querySelector(".movie__btn-trailer").addEventListener("click",B(t))})),d.refs.closeModalBtn.addEventListener("click",H),d.refs.modalCardBackdrop.addEventListener("click",(function(e){e.currentTarget===e.target&&H()})),i("6IdhT"),i("ivF4K"),AOS.init(),i("3MGSC")}();
//# sourceMappingURL=index.039f076c.js.map
