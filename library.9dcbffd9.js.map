{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,S,WCAA,IAAAC,EAAAD,EAAA,S,4EAUA,IAAIE,EAAcC,KAAKC,MAAMC,aAAaC,QAAQ,YAG3C,SAASC,EAAiBC,GAC/BN,EAAcC,KAAKC,MAAMC,aAAaC,QAAQ,GAAQG,OAALD,KACjD,IAAME,EAAYC,SAASC,eAAe,sBACpCC,EAAU,CACdC,WAAYZ,EAAYa,OACxBC,aAAc,GACdC,aAAc,EACdC,KAAM,EACNC,aAAa,EACbC,mBAAoB,kBACpBC,kBAAmB,iBACnBC,SAAU,CACRJ,KAAM,gDACNK,YACE,iEACFC,WACE,mGAGFC,mBACE,gHAGFC,WACE,sGAKAC,EAAaC,OAAOC,WAAW,sBAErC,SAASC,EAAmBC,GAEtBA,EAAMC,UAERnB,EAAQI,aAAe,E,CAL3BU,EAAWM,iBAAiB,SAAUH,GAQtCA,EAAmBH,GAEnB,IAAMO,EAAa,IAAIC,EAAAlC,GAAJ,CAAeS,EAAWG,GAa7C,SAASuB,EAAYC,EAAOC,EAAepB,GACzCnB,EAAAwC,KAAKC,sBAAsBC,UAAY,GAGvC,IAAIC,EAAQJ,GAFZpB,GAAQ,GAGJyB,EAAMD,EAAQJ,EAElB,GAAKD,EAAL,CAIA,IAAMO,EAASP,EAAMQ,MAAMH,EAAOC,GAC5BG,GAAgB,EAAAC,EAAAC,SAAaJ,IACnC,EAAAK,EAAAC,4BAA2BJ,EALzB,C,CApBJV,EAAYlC,EAAaW,EAAQG,aAAcH,EAAQK,MAEvDgB,EAAWiB,GAAG,aAAa,SAAApB,GACzBhC,EAAAwC,KAAKC,sBAAsBC,UAAY,GAKvC,IAAMlB,EAAcQ,EAAMb,KAC1BkB,EAAYlC,EAAaW,EAAQG,aAAcO,E,IApDnDhB,EAAiB,WDNjBR,EAAAwC,KAAKa,WAAWnB,iBAAiB,SAKjC,SAA2BoB,GAEzB9C,EAAiB,WAEjBR,EAAAwC,KAAKa,WAAWE,MAAMC,gBAAkB,sBACxCxD,EAAAwC,KAAKa,WAAWE,MAAME,YAAc,sBACpCzD,EAAAwC,KAAKkB,SAASH,MAAMC,gBAAkB,cACtCxD,EAAAwC,KAAKkB,SAASH,MAAME,YAAc,uB,IAXpCzD,EAAAwC,KAAKkB,SAASxB,iBAAiB,SAc/B,SAAyBoB,GAEvB9C,EAAiB,SAGjBR,EAAAwC,KAAKkB,SAASH,MAAMC,gBAAkB,sBACtCxD,EAAAwC,KAAKkB,SAASH,MAAME,YAAc,sBAClCzD,EAAAwC,KAAKa,WAAWE,MAAMC,gBAAkB,cACxCxD,EAAAwC,KAAKa,WAAWE,MAAME,YAAc,uB","sources":["src/js/library-header-btns.js","src/js/pagination-library.js"],"sourcesContent":["import { refs } from './refs';\nimport { getWatchedFilms, getQueueFilms } from './local_storage';\nimport { createPagination } from './pagination-library';\n\n\nrefs.btnWatched.addEventListener('click', onBtnWatchedClick);\nrefs.btnQueue.addEventListener('click', onBtnQueueClick);\n\n// getWatchedFilms();\n\nfunction onBtnWatchedClick(e) {\n  // getWatchedFilms();\n  createPagination('watched');\n\n  refs.btnWatched.style.backgroundColor = 'var(--button-bg-cl)';\n  refs.btnWatched.style.borderColor = 'var(--button-bg-cl)';\n  refs.btnQueue.style.backgroundColor = 'transparent';\n  refs.btnQueue.style.borderColor = 'var(--header-text-cl)';\n}\n\nfunction onBtnQueueClick(e) {\n  // getQueueFilms();\n  createPagination('queue');\n\n\n  refs.btnQueue.style.backgroundColor = 'var(--button-bg-cl)';\n  refs.btnQueue.style.borderColor = 'var(--button-bg-cl)';\n  refs.btnWatched.style.backgroundColor = 'transparent';\n  refs.btnWatched.style.borderColor = 'var(--header-text-cl)';\n}\n","import Pagination from 'tui-pagination';\nimport MoviesApiService from './api/moviesApiServiceClass';\nimport makingMarkup from './api/render-card-markup';\nimport { insertFilmsMarkupToLibrary } from './api/insertingIntoDifferentContainers';\nimport { refs } from './refs';\nimport { getWatchedFilms, getQueueFilms } from './local_storage';\nimport { createSpinner } from './spinner';\n\n// getWatchedFilms()\n\nlet fullLibrary = JSON.parse(localStorage.getItem('watched'));\ncreatePagination('watched');\n\nexport function createPagination(name) {\n  fullLibrary = JSON.parse(localStorage.getItem(`${name}`));\n  const container = document.getElementById('pagination-library');\n  const options = {\n    totalItems: fullLibrary.length,\n    itemsPerPage: 10,\n    visiblePages: 5,\n    page: 1,\n    centerAlign: true,\n    firstItemClassName: 'tui-first-child',\n    lastItemClassName: 'tui-last-child',\n    template: {\n      page: '<a href=\"#\" class=\"tui-page-btn\">{{page}}</a>',\n      currentPage:\n        '<strong class=\"tui-page-btn tui-is-selected\">{{page}}</strong>',\n      moveButton:\n        '<a href=\"#\" class=\"tui-page-btn tui-{{type}}\">' +\n        '<span class=\"tui-ico-{{type}}\">{{type}}</span>' +\n        '</a>',\n      disabledMoveButton:\n        '<span class=\"tui-page-btn tui-is-disabled tui-{{type}}\">' +\n        '<span class=\"tui-ico-{{type}}\">{{type}}</span>' +\n        '</span>',\n      moreButton:\n        '<a href=\"#\" class=\"tui-page-btn tui-{{type}}-is-ellip\">' +\n        '<span class=\"tui-ico-ellip\">...</span>' +\n        '</a>',\n    },\n  };\n  const mediaQuery = window.matchMedia('(max-width: 768px)');\n  mediaQuery.addEventListener('change', handleMobileChange);\n  function handleMobileChange(event) {\n    // console.log('EVENT: ', event);\n    if (event.matches) {\n      // console.log('OPTIONS: ', options);\n      options.visiblePages = 3;\n    }\n  }\n  handleMobileChange(mediaQuery);\n\n  const pagination = new Pagination(container, options);\n  displayList(fullLibrary, options.itemsPerPage, options.page);\n\n  pagination.on('afterMove', event => {\n    refs.libraryCardsContainer.innerHTML = '';\n\n    // спиннер не работает\n    // createSpinner();\n\n    const currentPage = event.page;\n    displayList(fullLibrary, options.itemsPerPage, currentPage);\n  });\n\n  function displayList(items, rows_per_page, page) {\n    refs.libraryCardsContainer.innerHTML = '';\n    page -= 1;\n\n    let start = rows_per_page * page;\n    let end = start + rows_per_page;\n\n    if (!items) {\n      return;\n    }\n\n    const markup = items.slice(start, end);\n    const renderWatched = makingMarkup(markup);\n    insertFilmsMarkupToLibrary(renderWatched);\n  }\n}\n"],"names":["$4Nugj","parcelRequire","$1VFfL","$4e1fdcffa24ebef7$var$fullLibrary","JSON","parse","localStorage","getItem","$4e1fdcffa24ebef7$export$7f3155e3cda021fd","name","concat","container","document","getElementById","options","totalItems","length","itemsPerPage","visiblePages","page","centerAlign","firstItemClassName","lastItemClassName","template","currentPage","moveButton","disabledMoveButton","moreButton","mediaQuery","window","matchMedia","handleMobileChange","event","matches","addEventListener","pagination","$parcel$interopDefault","displayList","items","rows_per_page","refs","libraryCardsContainer","innerHTML","start","end","markup","slice","renderWatched","$37jAB","default","$j7yxE","insertFilmsMarkupToLibrary","on","btnWatched","e","style","backgroundColor","borderColor","btnQueue"],"version":3,"file":"library.9dcbffd9.js.map"}