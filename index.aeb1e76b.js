!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},a={},n={},i=t.parcelRequired7c6;null==i&&((i=function(e){if(e in a)return a[e].exports;if(e in n){var t=n[e];delete n[e];var i={id:e,exports:{}};return a[e]=i,t.call(i.exports,i,i.exports),i.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){n[e]=t},t.parcelRequired7c6=i);var s=i("efgtE"),r=i("8MBJY"),o=i("a2hTj"),l=i("5DkEY"),c=function(){"use strict";function t(){e(r)(this,t),this.refs=l.refs}return e(o)(t,[{key:"show",value:function(){this.refs.spinner.classList.remove("is-hidden")}},{key:"hide",value:function(){this.refs.spinner.classList.add("is-hidden")}}]),t}(),u=i("bCDQD"),d=i("9ie47"),f=i("1VFfL"),p=(s=i("efgtE"),u=i("bCDQD"),d=i("9ie47"),l=i("5DkEY"),l=i("5DkEY"),new c);function m(){p.hide();l.refs.messageContainer.innerHTML='<p class="film-cards__error" data-key="responseError">Sorry, no response from server!</p>'}var g=new(0,s.default),h=new c;function v(t){var a=document.getElementById("pagination"),n={totalItems:t,itemsPerPage:20,visiblePages:5,page:1,centerAlign:!0,firstItemClassName:"tui-first-child",lastItemClassName:"tui-last-child",template:{page:'<a href="#" class="tui-page-btn">{{page}}</a>',currentPage:'<strong class="tui-page-btn tui-is-selected">{{page}}</strong>',moveButton:'<a href="#" class="tui-page-btn tui-{{type}}"><span class="tui-ico-{{type}}">{{type}}</span></a>',disabledMoveButton:'<span class="tui-page-btn tui-is-disabled tui-{{type}}"><span class="tui-ico-{{type}}">{{type}}</span></span>',moreButton:'<a href="#" class="tui-page-btn tui-{{type}}-is-ellip"><span class="tui-ico-ellip">...</span></a>'}},i=window.matchMedia("(max-width: 768px)");function s(e){e.matches&&(n.visiblePages=3)}i.addEventListener("change",s),s(i),new(e(f))(a,n).on("afterMove",(function(e){l.refs.homeCardsContainer.innerHTML="",h.show(),g.page=e.page,localStorage.setItem("page",g.page),g.fetchTrendingMovies().then((function(e){var t=e.results,a=(0,u.default)(t);h.hide(),(0,d.insertFilmsMarkupToHome)(a),localStorage.setItem("currentFilm",JSON.stringify(t))})).catch(m)}))}var y=new(0,s.default),M=new c;y.fetchGenres().then((function(e){var t=e.genres,a=!0,n=!1,i=void 0;try{for(var s,r=t[Symbol.iterator]();!(a=(s=r.next()).done);a=!0){var o=s.value,l=o.id,c=o.name;localStorage.setItem("genre_".concat(l),c)}}catch(e){n=!0,i=e}finally{try{a||null==r.return||r.return()}finally{if(n)throw i}}})).catch((function(e){return console.log(e)})),M.show(),y.fetchTrendingMovies().then((function(e){var t=e.results,a=e.total_results,n=(0,u.default)(t);M.hide(),(0,d.insertFilmsMarkupToHome)(n),v(a),localStorage.setItem("currentFilm",JSON.stringify(t))})).catch(m),i("1vzr2");l=i("5DkEY"),s=i("efgtE"),u=i("bCDQD"),d=i("9ie47"),f=i("1VFfL"),s=i("efgtE"),u=i("bCDQD"),d=i("9ie47"),l=i("5DkEY");var w=new(0,s.default),E=new c;function b(t,a){var n=document.getElementById("pagination"),i={totalItems:t,itemsPerPage:20,visiblePages:5,page:1,centerAlign:!0,firstItemClassName:"tui-first-child",lastItemClassName:"tui-last-child",template:{page:'<a href="#" class="tui-page-btn">{{page}}</a>',currentPage:'<strong class="tui-page-btn tui-is-selected">{{page}}</strong>',moveButton:'<a href="#" class="tui-page-btn tui-{{type}}"><span class="tui-ico-{{type}}">{{type}}</span></a>',disabledMoveButton:'<span class="tui-page-btn tui-is-disabled tui-{{type}}"><span class="tui-ico-{{type}}">{{type}}</span></span>',moreButton:'<a href="#" class="tui-page-btn tui-{{type}}-is-ellip"><span class="tui-ico-ellip">...</span></a>'}},s=window.matchMedia("(max-width: 768px)");function r(e){e.matches&&(i.visiblePages=3)}s.addEventListener("change",r),r(s),new(e(f))(n,i).on("afterMove",(function(e){l.refs.homeCardsContainer.innerHTML="",E.show(),w.page=e.page,w.query=a,w.fetchSearchingMovies().then((function(e){var t=e.results,a=(0,u.default)(t);E.hide(),(0,d.insertFilmsMarkupToHome)(a),localStorage.setItem("currentFilm",JSON.stringify(t))})).catch(m)}))}l=i("5DkEY");function k(){var e='<p class="search-form--badrequest">'.concat(function(){var e=localStorage.getItem("lang");if(!e||"en-US"===e)return"Search result not successful. Enter the correct movie name!";if("uk-UA"===e)return"Упс, нічого не знайдено. Введіть коректну назву фільма!"}(),"</p>");return l.refs.filmsSearchList.innerHTML=e,setTimeout((function(){return l.refs.filmsSearchList.innerHTML=""}),2e3)}var C=new(0,s.default),L=new c;l.refs.formSearch.addEventListener("submit",(function(e){e.preventDefault();var t=e.currentTarget.elements.searchInput.value.trim();if(!t)return;C.query=t,L.show();try{C.fetchSearchingMovies().then((function(e){var a=e.results,n=e.total_results;if(L.hide(),0!==a.length){l.refs.homeCardsContainer.innerHTML="";var i=(0,u.default)(a);(0,d.insertFilmsMarkupToHome)(i),b(n,t),localStorage.setItem("currentFilm",JSON.stringify(a))}else k()}))}catch(e){m()}l.refs.inputSearch.value="",l.refs.filmsSearchList.innerHTML="",l.refs.filmsSearchList.classList.remove("search-form__list--bgc")}));l=i("5DkEY"),d=i("9ie47");var S=i("7phwN"),D=i("kOvZM"),T=i("1vzr2"),I=i("Sz0iw"),O=i("1VvQp");l.refs.homeCardsContainer.addEventListener("click",(function(e){if("IMG"!==e.target.nodeName&&"B"!==e.target.nodeName&&"P"!==e.target.nodeName)return;document.body.classList.add("show-modal"),window.addEventListener("keydown",O.modalCloseByEsc);var t=e.target.dataset.id,a=localStorage.getItem("currentFilm"),n=JSON.parse(a).find((function(e){return e.id==t})),i=(0,I.makingModalCardMarkup)(n);(0,D.translateItems)(".movie__container--rigth-side [data-key]"),(0,d.insertModalMarkupHome)(i);var s=document.querySelector("#watched-btn");s.addEventListener("click",(function(){"REMOVE FROM WATCHED"===s.textContent&&(s.textContent="ADD TO WATCHED"),(0,S.addWatchedLocalStorage)(n,s,B)}));var r=document.querySelector("#queue-btn");r.addEventListener("click",(function(){"REMOVE FROM QUEUE"===r.textContent&&(r.textContent="ADD TO QUEUE"),(0,S.addQueueLocalStorage)(n,r,B)})),(0,T.textModalBtn)(t)})),l.refs.closeModalBtn.addEventListener("click",O.onCloseModalBtnClick),l.refs.modalCardBackdrop.addEventListener("click",O.onModalCardBackdropClick);var B=l.refs.homeCardsContainer;i("7khG9"),i("kkX0p"),AOS.init(),i("kOvZM"),i("wwN52");l=i("5DkEY");setTimeout((function(){l.refs.advertising.classList.add("is-visible")}),5e3),setTimeout((function(){l.refs.advertising.classList.remove("is-visible"),l.refs.advertising.classList.add("semi-visible")}),1e4)}();
//# sourceMappingURL=index.aeb1e76b.js.map
