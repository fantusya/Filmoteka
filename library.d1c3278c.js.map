{"mappings":"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","sources":["src/js/refs.js","src/js/api/gettingGenresList.js","src/js/api/render-card-markup.js","src/js/api/insertingIntoDifferentContainers.js","src/js/local_storage.js","src/js/library-header-btns.js","src/js/scroll-up-btn.js"],"sourcesContent":["export const refs = {\n  // containers\n  // homeCardsContainer: document.querySelector('.cards__list--home'),\n  homeCardsContainer: document.querySelector('.cards__list--home'),\n  libraryCardsContainer: document.querySelector('.cards__list--library'),\n\n  // buttons\n  btnWatched: document.querySelector('#watched'),\n  btnQueue: document.querySelector('#queue'),\n\n  btnAddToWatched: document.querySelector('.modal_watched'),\n  btnAddToQueue: document.querySelector('.modal_queue'),\n\n  closeModalBtn: document.querySelector('.modal-close-button'),\n\n  // search\n  DEBOUNCE_DELAY: 300,\n  formSearch: document.querySelector('.search-form'),\n  filmsSearchList: document.querySelector('.search-form__list'),\n\n  //modal-card\n  modalCardBackdrop: document.querySelector('.modal-card-backdrop'),\n  modalCardContainer: document.querySelector('.movie__container'),\n\n  inputSearch: document.querySelector('.search-form__input'),\n};\n","export function gettingGenresListForModal(array) {\n  let genre_names = '';\n\n  for (const id of array) {\n    const genre_name = localStorage.getItem(`genre_${id}`);\n    if (!genre_name) {\n      continue;\n    }\n    if (genre_names) {\n      genre_names += ', ';\n    }\n    genre_names += genre_name;\n  }\n  return genre_names;\n}\n\nexport function gettingGenresListForCard(array) {\n  let genre_names = '';\n\n  if (array.length <= 2) {\n    for (const id of array) {\n      let genre_name = localStorage.getItem(`genre_${id}`);\n\n      if (!genre_name) {\n        continue;\n      }\n\n      if (genre_names) {\n        genre_names += ', ';\n      }\n\n      genre_names += genre_name;\n    }\n    return genre_names;\n  }\n\n  if (array.length >= 3) {\n    let counter = 0;\n\n    for (const id of array) {\n      let genre_name = localStorage.getItem(`genre_${id}`);\n\n      if (!genre_name) {\n        continue;\n      }\n      counter += 1;\n      if (counter === 3) {\n        genre_names += ', Other';\n        break;\n      }\n      if (genre_names) {\n        genre_names += ', ';\n      }\n\n      genre_names += genre_name;\n    }\n    return genre_names;\n  }\n}\n","import { gettingGenresListForCard } from './gettingGenresList';\nimport { refs } from '../refs';\n\nconst BASE_POSTER_URL = `https://image.tmdb.org/t/p/w500`;\n\nexport default function makingMarkup(results) {\n  const markup = results\n    .map(\n      ({\n        title,\n        name,\n        poster_path,\n        genre_ids,\n        release_date,\n        first_air_date,\n        vote_average,\n        id,\n      }) => {\n        let imagePath = ``;\n        poster_path === null\n          ? (imagePath = `https://raw.githubusercontent.com/marvall/filmoteka/main/src/images/no-poster.png`)\n          : (imagePath = `${BASE_POSTER_URL}/${BASE_POSTER_URL}/${poster_path}`);\n\n        return `<li data-aos=\"fade-up\"\n    data-aos-offset=\"200\"\n    data-aos-delay=\"100\"\n    data-aos-duration=\"1000\"\n    data-aos-easing=\"ease-in-out\"\n     class=\"movie-card\">\n        <div class=\"movie-card__link\" href=\"#\">\n        <p class=\"movie-card__raiting\">\n                        <b>${setReleaseVote(vote_average)}</b>\n                    </p>\n                <img data-id=\"${id}\" width=\"280\" height=\"402\" class=\"movie-card__img\" src=\"${imagePath}\" alt=\"${\n          title || name\n        }\" loading=\"lazy\"/>\n    <div data-aos=\"fade-right\"\n    data-aos-delay=\"50\"\n    data-aos-duration=\"1000\"\n    data-aos-easing=\"ease-in-out\"\n    data-aos-once=\"false\"\n     class=\"movie-card__cont\">\n                  <h2 class=\"movie-card__title\">${title || name}</h2>\n                    <p class=\"movie-card__info\">\n                        <b>${\n                          gettingGenresListForCard(genre_ids) ||\n                          `Genre not defined`\n                        } | </b>\n                    </p>\n                    <p class=\"movie-card__info\">\n                        <b>${\n                          setReleaseDate(release_date, first_air_date) ||\n                          'No data'\n                        }</b>\n                    </p>\n                       \n                    </div>\n                    </div>\n            </li>`;\n      }\n    )\n    .join('');\n  return markup;\n}\n\nfunction setReleaseDate(releaseDate, firstAirDate) {\n  if (!releaseDate) {\n    return firstAirDate.slice(0, 4);\n  }\n  return releaseDate.slice(0, 4);\n}\n\nfunction setReleaseVote(vote) {\n  if (!vote) {\n    return 'No vote';\n  }\n  return vote.toFixed(1);\n}\n","import { refs } from '../refs';\n\n// FUNCTION FOR INSERTING MARKUP TO HOME-CARDS-CONTAINER\nexport const insertFilmsMarkupToHome = filmsMarkup =>\n  refs.homeCardsContainer.insertAdjacentHTML('beforeend', filmsMarkup);\n\n// FUNCTION FOR INSERTING MARKUP TO LIBRARY-CARDS-CONTAINER\nexport const insertFilmsMarkupToLibrary = filmsMarkup =>\n  refs.libraryCardsContainer.insertAdjacentHTML('beforeend', filmsMarkup);\n","import { refs } from './refs';\nimport makingMarkup from './api/render-card-markup';\nimport { insertFilmsMarkupToLibrary } from './api/insertingIntoDifferentContainers';\n\nexport function addWatchedLocalStorage(obj) {\n  let arrayFilmsWatched = [];\n  const w = localStorage.getItem('watched');\n  if (w) {\n    arrayFilmsWatched = JSON.parse(w);\n  }\n\n  // Фільтрація раніше доданих фільмів\n  const currentId = obj.id;\n  if (arrayFilmsWatched.find(el => el.id === currentId)) {\n    return;\n  }\n\n  arrayFilmsWatched.push(obj);\n  localStorage.setItem('watched', JSON.stringify(arrayFilmsWatched));\n  return arrayFilmsWatched;\n}\n\nexport function addQueueLocalStorage(obj) {\n  let arrayFilmsQueue = [];\n  const q = localStorage.getItem('queue');\n  if (q) {\n    arrayFilmsQueue = JSON.parse(q);\n  }\n\n  // Фільтрація раніше доданих фільмів\n  const currentId = obj.id;\n  if (arrayFilmsWatched.find(el => el.id === currentId)) {\n    return;\n  }\n\n  arrayFilmsQueue.push(obj);\n  localStorage.setItem('queue', JSON.stringify(arrayFilmsQueue));\n  return arrayFilmsQueue;\n}\n\nexport function getWatchedFilms() {\n  clearLibrary();\n  try {\n    const saveFilms = localStorage.getItem('watched');\n    //Якщо в localStorage немає ключа watched - показуємо заглушку\n    if (saveFilms === null) {\n      addScreenSaver();\n      return;\n    }\n\n    const parsedFilms = JSON.parse(saveFilms);\n    if (parsedFilms.length === 0) {\n      addScreenSaver();\n      return;\n    }\n\n    const renderWatched = makingMarkup(parsedFilms);\n    insertFilmsMarkupToLibrary(renderWatched);\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nexport function getQueueFilms() {\n  clearLibrary();\n  try {\n    const saveFilms = localStorage.getItem('queue');\n    //Якщо в localStorage немає ключа queue - показуємо заглушку\n    if (saveFilms === null) {\n      addScreenSaver();\n      return;\n    }\n\n    const parsedFilms = JSON.parse(saveFilms);\n    // Перевірка на порожній масив в localStorage\n    if (parsedFilms.length === 0) {\n      addScreenSaver();\n      return;\n    }\n\n    const renderQueue = makingMarkup(parsedFilms);\n    insertFilmsMarkupToLibrary(renderQueue);\n  } catch (error) {\n    console.log(error);\n  }\n}\n\n//   Фунуція для очищення попередніх результатів рендеру\nfunction clearLibrary() {\n  refs.libraryCardsContainer.innerHTML = '';\n}\n\n// Функція для відмальовки \"заглушки\" (якщо localStorage порожній)\nfunction addScreenSaver() {\n  refs.libraryCardsContainer.innerHTML = `<strong \n    style=\"\n    font-size: 18px;\n    color: var(--secondary-text-cl);\">\n    Sorry, no information has been added\n    </strong>`;\n}\n","import { refs } from './refs';\nimport { getWatchedFilms, getQueueFilms } from './local_storage';\n\nrefs.btnWatched.addEventListener('click', onBtnWatchedClick);\nrefs.btnQueue.addEventListener('click', onBtnQueueClick);\n\ngetWatchedFilms();\n\nfunction onBtnWatchedClick(e) {\n  getWatchedFilms();\n\n  refs.btnWatched.style.backgroundColor = 'var(--button-bg-cl)';\n  refs.btnWatched.style.borderColor = 'var(--button-bg-cl)';\n  refs.btnQueue.style.backgroundColor = 'transparent';\n  refs.btnQueue.style.borderColor = 'var(--header-text-cl)';\n}\n\nfunction onBtnQueueClick(e) {\n  getQueueFilms();\n\n  refs.btnQueue.style.backgroundColor = 'var(--button-bg-cl)';\n  refs.btnQueue.style.borderColor = 'var(--button-bg-cl)';\n  refs.btnWatched.style.backgroundColor = 'transparent';\n  refs.btnWatched.style.borderColor = 'var(--header-text-cl)';\n}\n","const scrollBtnEl = document.getElementById('scroll-up');\n\nscrollBtnEl.addEventListener('click', onScrollUp);\n\nfunction onScrollUp() {\n  window.scrollTo({ top: 0, behavior: 'smooth' });\n}\n\nwindow.addEventListener('scroll', function () {\n  scrollBtnEl.hidden = pageYOffset < document.documentElement.clientHeight;\n});\n"],"names":["$ee27a4d7c64fc8c4$export$21666b427502ea6d","homeCardsContainer","document","querySelector","libraryCardsContainer","btnWatched","btnQueue","btnAddToWatched","btnAddToQueue","closeModalBtn","DEBOUNCE_DELAY","formSearch","filmsSearchList","modalCardBackdrop","modalCardContainer","inputSearch","$0e2c9074ea617537$export$a0fef2a13268cf9e","array","genre_names","length","id","genre_name","localStorage","getItem","counter","$e7d71ecfee59e282$export$2e2bcd8739ae039","results","map","title","name","poster_path","genre_ids","release_date","first_air_date","vote_average","imagePath","vote","toFixed","releaseDate","firstAirDate","slice","join","$57c2123ec10692c9$export$6f52a622547ea617","filmsMarkup","insertAdjacentHTML","$b323f828ae55b27e$export$c157f2a2227abe3b","$b323f828ae55b27e$var$clearLibrary","saveFilms","$b323f828ae55b27e$var$addScreenSaver","parsedFilms","JSON","parse","renderWatched","error","console","log","$b323f828ae55b27e$export$c2f4e899f5757252","renderQueue","innerHTML","addEventListener","e","style","backgroundColor","borderColor","$6e615e981b554d80$var$scrollBtnEl","getElementById","window","scrollTo","top","behavior","hidden","pageYOffset","documentElement","clientHeight"],"version":3,"file":"library.d1c3278c.js.map"}